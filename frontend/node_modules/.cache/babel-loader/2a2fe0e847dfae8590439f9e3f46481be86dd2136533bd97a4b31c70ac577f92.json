{"ast":null,"code":"import React,{useState,useEffect}from'react';import styled from'styled-components';import axios from'axios';import{useSelector}from'react-redux';import Comment from'./Comment';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Container=styled.div``;const NewComment=styled.div`\n  display: flex;\n  align-items: center;\n  gap: 10px;\n`;const Avatar=styled.img`\n  width: 50px;\n  height: 50px;\n  border-radius: 50%;\n`;const Input=styled.input`\n  border: none;\n  border-bottom: 1px solid ${_ref=>{let{theme}=_ref;return theme.soft;}};\n  background-color: transparent;\n  outline: none;\n  padding: 5px;\n  width: 100%;\n  color: ${_ref2=>{let{theme}=_ref2;return theme.text;}};\n`;const Comments=_ref3=>{let{videoId}=_ref3;const{currentUser}=useSelector(state=>state.user);const[comments,setComments]=useState([]);const[newComment,setNewComment]=useState('');useEffect(()=>{const fetchComments=async()=>{try{const res=await axios.get(`/comments/${videoId}`);setComments(res.data);}catch(err){console.log(err);}};fetchComments();},[videoId]);const handleComment=async e=>{e.preventDefault();try{const res=await axios.post('/comments',{videoId,desc:newComment});setComments([...comments,res.data]);setNewComment('');}catch(err){console.log(err);}};return/*#__PURE__*/_jsxs(Container,{children:[/*#__PURE__*/_jsxs(NewComment,{children:[/*#__PURE__*/_jsx(Avatar,{src:currentUser.img}),/*#__PURE__*/_jsx(Input,{placeholder:\"Add a comment...\",value:newComment,onChange:e=>setNewComment(e.target.value),onKeyPress:e=>e.key==='Enter'&&handleComment(e)})]}),comments.map(comment=>/*#__PURE__*/_jsx(Comment,{comment:comment},comment._id))]});};export default Comments;","map":{"version":3,"names":["React","useState","useEffect","styled","axios","useSelector","Comment","jsx","_jsx","jsxs","_jsxs","Container","div","NewComment","Avatar","img","Input","input","_ref","theme","soft","_ref2","text","Comments","_ref3","videoId","currentUser","state","user","comments","setComments","newComment","setNewComment","fetchComments","res","get","data","err","console","log","handleComment","e","preventDefault","post","desc","children","src","placeholder","value","onChange","target","onKeyPress","key","map","comment","_id"],"sources":["D:/MyTube/frontend/src/components/Comments/index.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport styled from 'styled-components';\r\nimport axios from 'axios';\r\nimport { useSelector } from 'react-redux';\r\nimport Comment from './Comment';\r\n\r\nconst Container = styled.div``;\r\n\r\nconst NewComment = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 10px;\r\n`;\r\n\r\nconst Avatar = styled.img`\r\n  width: 50px;\r\n  height: 50px;\r\n  border-radius: 50%;\r\n`;\r\n\r\nconst Input = styled.input`\r\n  border: none;\r\n  border-bottom: 1px solid ${({ theme }) => theme.soft};\r\n  background-color: transparent;\r\n  outline: none;\r\n  padding: 5px;\r\n  width: 100%;\r\n  color: ${({ theme }) => theme.text};\r\n`;\r\n\r\nconst Comments = ({ videoId }) => {\r\n  const { currentUser } = useSelector((state) => state.user);\r\n  const [comments, setComments] = useState([]);\r\n  const [newComment, setNewComment] = useState('');\r\n\r\n  useEffect(() => {\r\n    const fetchComments = async () => {\r\n      try {\r\n        const res = await axios.get(`/comments/${videoId}`);\r\n        setComments(res.data);\r\n      } catch (err) {\r\n        console.log(err);\r\n      }\r\n    };\r\n    fetchComments();\r\n  }, [videoId]);\r\n\r\n  const handleComment = async (e) => {\r\n    e.preventDefault();\r\n    try {\r\n      const res = await axios.post('/comments', {\r\n        videoId,\r\n        desc: newComment,\r\n      });\r\n      setComments([...comments, res.data]);\r\n      setNewComment('');\r\n    } catch (err) {\r\n      console.log(err);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Container>\r\n      <NewComment>\r\n        <Avatar src={currentUser.img} />\r\n        <Input\r\n          placeholder=\"Add a comment...\"\r\n          value={newComment}\r\n          onChange={(e) => setNewComment(e.target.value)}\r\n          onKeyPress={(e) => e.key === 'Enter' && handleComment(e)}\r\n        />\r\n      </NewComment>\r\n      {comments.map((comment) => (\r\n        <Comment key={comment._id} comment={comment} />\r\n      ))}\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default Comments;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}